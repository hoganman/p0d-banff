package BANFF
version v3r16


manager Christine Nielsen <cnielsen@phas.ubc.ca>

author nd280-software@mailman.t2k.org

branches cmt doc src app parameters inputs

use ROOT *
use nd280Psyche *

#Copy make fragments from nd280Policy
make_fragment version -header=version_header -trailer=version_trailer

#Build methods to include
document version version *.cxx ../dict/*.cxx
document register register
document doxygen doxygen -group=documentation *.cxx *.hxx ../doc/*.dox *py

#The library to build
library BANFF *.cxx \
    BANFFSample/*.cxx \
    psycheInterface/*.cxx \
    Minuit2LikelihoodFit/*.cxx

#Build information used by packages that use this one.
#Uncomment "-D MULTITHREADPSYCHE" in order to enable multithreaded
#re-processing of psyche events. Be sure that you have also properly 
#altered the psyche requirements files if you do so, otherwise it will crash.
macro BANFF_cppflags " -DBANFF_USED -fPIC -fopenmp -O3 -march=native -Wall"# -D MULTITHREADPSYCHE"
#macro BANFF_cppflags " -DBANFF_USED -fPIC -fopenmp -DDEBUGWEIGHTS=1 -O3 -march=native -Wall "# -D MULTITHREADPSYCHE"
#macro BANFF_cppflags " -DBANFF_USED -fPIC -fopenmp -O0 -march=native -Wall -ltcmalloc"# -D MULTITHREADPSYCHE"
macro BANFF_linkopts " -L$(BANFFROOT)/$(BANFF_tag) -lBANFF -lMinuit2 -lgomp "# -lprofiler
macro BANFF_stamps " $(BANFFROOT)/$(BANFF_tag)/BANFF.stamp"
macro cpplinkflag \
    Linux "-Wl, --no-as-needed"


#The paths to find this library
path_remove PATH "$(BANFFROOT)"
path_prepend PATH "$(BANFFROOT)/$(BANFF_tag)"
path_remove LD_LIBRARY_PATH "$(BANFFROOT)"
path_prepend LD_LIBRARY_PATH "$(BANFFROOT)/$(BANFF_tag)"
path_remove DYLD_LIBRARY_PATH "" \
            Darwin            "$(BANFFROOT)"
path_prepend DYLD_LIBRARY_PATH "" \
            Darwin            "$(BANFFROOT)/$(BANFF_tag)"

application RunJointFit2017 ../app/RunJointFit2017.cxx
application RunJointFit2018 ../app/RunJointFit2018.cxx

application ValidateND280Cov ../app/ValidateND280Cov.cxx
application PlotDetVariations ../app/PlotDetVariations.cxx

application TestBinning ../app/TestBinning.cxx
application DumpPOTRatio ../app/DumpPOTRatio.cxx        

application VaryParametersByNSigma2017 ../app/VaryParametersByNSigma2017.cxx
application ConvertCovFileToObsNorm ../app/ConvertCovFileToObsNorm.cxx

application Make2018JointFitXSecParameterFile_MaCH3 ../app/Make2018JointFitXSecParameterFile_MaCH3.cxx
application Make2018PostFitFileAllParams ../app/Make2018PostFitFileAllParams.cxx

application ThrowToys2017FitBinning ../app/untested/ThrowToys2017FitBinning.cxx

application PerformPullValidation ../app/untested/PerformPullValidation.cxx

application MakeND280Cov ../app/MakeND280Cov.cxx
application MakeND280ErrorEnvelope ../app/MakeND280ErrorEnvelope.cxx
